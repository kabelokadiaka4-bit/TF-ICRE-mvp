(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73334,e=>{"use strict";let t=(0,e.i(35395).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],73334)},24933,e=>{"use strict";let t=(0,e.i(35395).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],24933)},62367,e=>{"use strict";let t=(0,e.i(35395).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],62367)},63307,e=>{"use strict";var t=e.i(75118),r=e.i(89211),a=e.i(92560),s=e.i(55858);let l=(0,e.i(35395).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var i=e.i(77221),n=e.i(24933),o=e.i(62367),c=e.i(73334),m=e.i(13569),d=e.i(23378);function u(){let e,n,o,c,m,d,u,f,g,y,b,j,N,v,w,S,_,k,C,D,A,R,I,F,P,V=(0,r.c)(54),[L,U]=(0,a.useState)("inputData");V[0]===Symbol.for("react.memo_cache_sentinel")?(e={},V[0]=e):e=V[0];let[T,q]=(0,a.useState)(e);V[1]===Symbol.for("react.memo_cache_sentinel")?(n=new Set,V[1]=n):n=V[1];let[E,O]=(0,a.useState)(n);V[2]!==L?(o=(e,t)=>{switch(q(e=>({...e,...t})),O(e=>new Set(e).add(L)),e){case"inputData":U("documentVerification");break;case"documentVerification":U("runScore")}},V[2]=L,V[3]=o):o=V[3];let M=o;V[4]!==E||V[5]!==L?(c=e=>E.has(e)?"flex items-center space-x-2 p-3 rounded-lg font-medium transition-all bg-green-500/10 text-green-700":L===e?"flex items-center space-x-2 p-3 rounded-lg font-medium transition-all bg-primary/10 text-primary border border-primary/20":"flex items-center space-x-2 p-3 rounded-lg font-medium transition-all bg-surface-variant/50 text-on-surface-variant",V[4]=E,V[5]=L,V[6]=c):c=V[6];let $=c;V[7]!==L||V[8]!==T||V[9]!==M?(m=()=>{switch(L){case"inputData":return(0,t.jsx)(x,{onNext:e=>M("inputData",e),initialData:T});case"documentVerification":return(0,t.jsx)(h,{onNext:e=>M("documentVerification",e),initialData:T});case"runScore":return(0,t.jsx)(p,{onNext:e=>M("runScore",e),initialData:T});default:return(0,t.jsx)("div",{children:"Unknown Step"})}},V[7]=L,V[8]=T,V[9]=M,V[10]=m):m=V[10];let B=m;V[11]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"New Loan Case"}),V[11]=d):d=V[11];let G=$("inputData");V[12]!==E?(u=E.has("inputData")?(0,t.jsx)(i.CheckCircle2,{className:"w-5 h-5"}):(0,t.jsx)("span",{children:"1."}),V[12]=E,V[13]=u):u=V[13],V[14]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)("span",{children:"Input Data"}),V[14]=f):f=V[14],V[15]!==L?(g="inputData"===L&&(0,t.jsx)(l,{className:"w-4 h-4 ml-auto"}),V[15]=L,V[16]=g):g=V[16],V[17]!==G||V[18]!==u||V[19]!==g?(y=(0,t.jsxs)("div",{className:G,children:[u,f,g]}),V[17]=G,V[18]=u,V[19]=g,V[20]=y):y=V[20];let z=$("documentVerification");V[21]!==E?(b=E.has("documentVerification")?(0,t.jsx)(i.CheckCircle2,{className:"w-5 h-5"}):(0,t.jsx)("span",{children:"2."}),V[21]=E,V[22]=b):b=V[22],V[23]===Symbol.for("react.memo_cache_sentinel")?(j=(0,t.jsx)("span",{children:"Document Verification"}),V[23]=j):j=V[23],V[24]!==L?(N="documentVerification"===L&&(0,t.jsx)(l,{className:"w-4 h-4 ml-auto"}),V[24]=L,V[25]=N):N=V[25],V[26]!==z||V[27]!==b||V[28]!==N?(v=(0,t.jsxs)("div",{className:z,children:[b,j,N]}),V[26]=z,V[27]=b,V[28]=N,V[29]=v):v=V[29];let K=$("runScore");return V[30]!==E?(w=E.has("runScore")?(0,t.jsx)(i.CheckCircle2,{className:"w-5 h-5"}):(0,t.jsx)("span",{children:"3."}),V[30]=E,V[31]=w):w=V[31],V[32]===Symbol.for("react.memo_cache_sentinel")?(S=(0,t.jsx)("span",{children:"Run Score"}),V[32]=S):S=V[32],V[33]!==L?(_="runScore"===L&&(0,t.jsx)(l,{className:"w-4 h-4 ml-auto"}),V[33]=L,V[34]=_):_=V[34],V[35]!==K||V[36]!==w||V[37]!==_?(k=(0,t.jsxs)("div",{className:K,children:[w,S,_]}),V[35]=K,V[36]=w,V[37]=_,V[38]=k):k=V[38],V[39]!==y||V[40]!==v||V[41]!==k?(C=(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[y,v,k]}),V[39]=y,V[40]=v,V[41]=k,V[42]=C):C=V[42],V[43]===Symbol.for("react.memo_cache_sentinel")?(D={opacity:0,x:20},A={opacity:1,x:0},R={duration:.3},V[43]=D,V[44]=A,V[45]=R):(D=V[43],A=V[44],R=V[45]),V[46]!==B?(I=B(),V[46]=B,V[47]=I):I=V[47],V[48]!==L||V[49]!==I?(F=(0,t.jsx)(s.motion.div,{initial:D,animate:A,transition:R,className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:I},L),V[48]=L,V[49]=I,V[50]=F):F=V[50],V[51]!==C||V[52]!==F?(P=(0,t.jsxs)("div",{className:"p-6 space-y-8 max-w-7xl mx-auto",children:[d,C,F]}),V[51]=C,V[52]=F,V[53]=P):P=V[53],P}let x=e=>{let s,l,i,n,o,c,m,d,u,x,h,p,f,g,y,b,j,N,v,w,S,_,k,C,D,A,R,I,F=(0,r.c)(52),{onNext:P,initialData:V}=e,[L,U]=(0,a.useState)(V.customerName||""),[T,q]=(0,a.useState)(V.customerID||""),[E,O]=(0,a.useState)(V.loanAmount||""),[M,$]=(0,a.useState)(V.loanTerms||""),[B,G]=(0,a.useState)(V.sector||""),[z,K]=(0,a.useState)(V.country||""),[H,J]=(0,a.useState)(null);F[0]!==z||F[1]!==T||F[2]!==L||F[3]!==H||F[4]!==E||F[5]!==M||F[6]!==P||F[7]!==B?(s=e=>{(e.preventDefault(),L&&T&&E&&M&&B&&z)?P({customerName:L,customerID:T,loanAmount:E,loanTerms:M,sector:B,country:z,financials:H}):alert("Please fill all required fields.")},F[0]=z,F[1]=T,F[2]=L,F[3]=H,F[4]=E,F[5]=M,F[6]=P,F[7]=B,F[8]=s):s=F[8];let W=s;return F[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Step 1: Input Customer & Loan Data"}),i=(0,t.jsx)("p",{className:"text-gray-600",children:"Enter the customer and loan details to begin the assessment."}),F[9]=l,F[10]=i):(l=F[9],i=F[10]),F[11]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("label",{htmlFor:"customerName",className:"block text-sm font-medium text-gray-700",children:"Customer Name"}),F[11]=n):n=F[11],F[12]===Symbol.for("react.memo_cache_sentinel")?(o=e=>U(e.target.value),F[12]=o):o=F[12],F[13]!==L?(c=(0,t.jsxs)("div",{children:[n,(0,t.jsx)("input",{type:"text",id:"customerName",value:L,onChange:o,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",required:!0})]}),F[13]=L,F[14]=c):c=F[14],F[15]===Symbol.for("react.memo_cache_sentinel")?(m=(0,t.jsx)("label",{htmlFor:"customerID",className:"block text-sm font-medium text-gray-700",children:"Customer ID"}),F[15]=m):m=F[15],F[16]===Symbol.for("react.memo_cache_sentinel")?(d=e=>q(e.target.value),F[16]=d):d=F[16],F[17]!==T?(u=(0,t.jsxs)("div",{children:[m,(0,t.jsx)("input",{type:"text",id:"customerID",value:T,onChange:d,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",required:!0})]}),F[17]=T,F[18]=u):u=F[18],F[19]!==c||F[20]!==u?(x=(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c,u]}),F[19]=c,F[20]=u,F[21]=x):x=F[21],F[22]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)("label",{htmlFor:"loanAmount",className:"block text-sm font-medium text-gray-700",children:"Loan Amount"}),F[22]=h):h=F[22],F[23]===Symbol.for("react.memo_cache_sentinel")?(p=e=>O(e.target.value),F[23]=p):p=F[23],F[24]!==E?(f=(0,t.jsxs)("div",{children:[h,(0,t.jsx)("input",{type:"number",id:"loanAmount",value:E,onChange:p,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",required:!0})]}),F[24]=E,F[25]=f):f=F[25],F[26]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsx)("label",{htmlFor:"loanTerms",className:"block text-sm font-medium text-gray-700",children:"Loan Terms (Months)"}),F[26]=g):g=F[26],F[27]===Symbol.for("react.memo_cache_sentinel")?(y=e=>$(e.target.value),F[27]=y):y=F[27],F[28]!==M?(b=(0,t.jsxs)("div",{children:[g,(0,t.jsx)("input",{type:"number",id:"loanTerms",value:M,onChange:y,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",required:!0})]}),F[28]=M,F[29]=b):b=F[29],F[30]!==f||F[31]!==b?(j=(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f,b]}),F[30]=f,F[31]=b,F[32]=j):j=F[32],F[33]===Symbol.for("react.memo_cache_sentinel")?(N=(0,t.jsx)("label",{htmlFor:"sector",className:"block text-sm font-medium text-gray-700",children:"Sector"}),F[33]=N):N=F[33],F[34]===Symbol.for("react.memo_cache_sentinel")?(v=e=>G(e.target.value),F[34]=v):v=F[34],F[35]!==B?(w=(0,t.jsxs)("div",{children:[N,(0,t.jsx)("input",{type:"text",id:"sector",value:B,onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",required:!0})]}),F[35]=B,F[36]=w):w=F[36],F[37]===Symbol.for("react.memo_cache_sentinel")?(S=(0,t.jsx)("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700",children:"Country"}),F[37]=S):S=F[37],F[38]===Symbol.for("react.memo_cache_sentinel")?(_=e=>K(e.target.value),F[38]=_):_=F[38],F[39]!==z?(k=(0,t.jsxs)("div",{children:[S,(0,t.jsx)("input",{type:"text",id:"country",value:z,onChange:_,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",required:!0})]}),F[39]=z,F[40]=k):k=F[40],F[41]!==w||F[42]!==k?(C=(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w,k]}),F[41]=w,F[42]=k,F[43]=C):C=F[43],F[44]===Symbol.for("react.memo_cache_sentinel")?(D=(0,t.jsx)("label",{htmlFor:"financials",className:"block text-sm font-medium text-gray-700",children:"Upload Financials / Statements"}),F[44]=D):D=F[44],F[45]===Symbol.for("react.memo_cache_sentinel")?(A=(0,t.jsxs)("div",{children:[D,(0,t.jsx)("input",{type:"file",id:"financials",onChange:e=>J(e.target.files),className:"mt-1 block w-full text-sm text-gray-500\n            file:mr-4 file:py-2 file:px-4\n            file:rounded-md file:border-0\n            file:text-sm file:font-semibold\n            file:bg-primary/10 file:text-primary\n            hover:file:bg-primary/20",multiple:!0})]}),R=(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90",children:"Next: Document Verification"}),F[45]=A,F[46]=R):(A=F[45],R=F[46]),F[47]!==W||F[48]!==x||F[49]!==j||F[50]!==C?(I=(0,t.jsxs)("form",{onSubmit:W,className:"space-y-4",children:[l,i,x,j,C,A,R]}),F[47]=W,F[48]=x,F[49]=j,F[50]=C,F[51]=I):I=F[51],I},h=({onNext:e,initialData:r})=>{let[s,l]=(0,a.useState)(null),[i,d]=(0,a.useState)(null),[u,x]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(""),y=async()=>{if(!s)return void g("Please upload a document first.");p(!0),g("");try{await new Promise(e=>setTimeout(e,2e3));let e={invoiceNumber:"INV-2025-001",amount:r.loanAmount||1e5,currency:"USD",shipper:"Global Trade Inc.",consignee:r.customerName||"Customer ABC",status:"Approved",mismatchedValues:["currency"],riskItems:["High-risk shipper location"]};x(e),g("")}catch(e){console.error("Document verification failed:",e),g("Failed to extract document data. Please try again.")}finally{p(!1)}};return(0,t.jsxs)("form",{onSubmit:t=>{(t.preventDefault(),u)?e({documentVerified:!0,extractedFields:u}):g("Please verify the document before continuing.")},className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Step 2: Document Verification (AI Extraction)"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Upload and verify supporting documents for AI extraction."}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"documentUpload",className:"block text-sm font-medium text-gray-700",children:"Upload Document"}),(0,t.jsx)("input",{type:"file",id:"documentUpload",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];l(t),d(URL.createObjectURL(t)),x(null),g("")}},className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary/10 file:text-primary hover:file:bg-primary/20",accept:".pdf,.png,.jpg,.jpeg"})]}),f&&(0,t.jsxs)("div",{className:"p-3 bg-error/10 border border-error/20 rounded-md text-sm text-error-foreground flex items-center gap-2",children:[(0,t.jsx)(n.AlertCircle,{className:"w-4 h-4"})," ",f]}),s&&(0,t.jsxs)("div",{className:"mt-4 flex flex-col md:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 border border-gray-200 rounded-md p-4",children:[(0,t.jsx)("h3",{className:"text-md font-semibold mb-2",children:"Document Preview"}),i&&(s.type.startsWith("image/")?(0,t.jsx)("img",{src:i,alt:"Document Preview",className:"max-w-full h-auto rounded-md"}):(0,t.jsx)("div",{className:"flex items-center justify-center h-40 bg-gray-100 text-gray-500 rounded-md",children:"PDF Preview (Not implemented, display message)"})),(0,t.jsxs)("button",{type:"button",onClick:y,disabled:h,className:"mt-4 w-full py-2 px-4 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:[h?(0,t.jsx)(c.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(o.ArrowRight,{className:"mr-2 h-4 w-4"}),h?"Extracting...":"Extract Data with AI"]})]}),(0,t.jsxs)("div",{className:"flex-1 border border-gray-200 rounded-md p-4 space-y-3",children:[(0,t.jsx)("h3",{className:"text-md font-semibold mb-2",children:"Extracted Fields"}),u?(0,t.jsx)("div",{className:"space-y-2 text-sm",children:Object.entries(u).map(([e,r])=>(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{className:"font-medium",children:[e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),":"]}),(0,t.jsx)("span",{className:(0,m.clsx)(u.mismatchedValues?.includes(e)&&"bg-yellow-100 text-yellow-800 p-0.5 rounded",u.riskItems?.includes(e)&&"bg-red-100 text-red-800 p-0.5 rounded"),children:String(r)})]},e))}):(0,t.jsx)("p",{className:"text-sm text-gray-500 italic",children:'Upload a document and click "Extract Data with AI" to see extracted fields.'})]})]}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90",disabled:!u||h,children:"Next: Run Score"})]})},p=({onNext:e,initialData:r})=>{let[l,i]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[x,h]=(0,a.useState)(""),p=async()=>{u(!0),h("");try{let e=r.customerID||"mock-entity-123",t=await d.ScoringService.getScore(e);i(t),h("")}catch(e){console.error("Error running score:",e),h("Failed to generate score. Please try again.")}finally{u(!1)}},f=t=>r=>{r.preventDefault(),alert(`Action: ${t} for score: ${l?.composite_rating}`),e({scoreRun:!0,finalAction:t,scoreResult:l})};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Step 3: Run the Score (The Magic Moment)"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Initiate the credit scoring process and review results."}),!l&&(0,t.jsxs)("button",{type:"button",onClick:p,disabled:m,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 flex items-center justify-center",children:[m?(0,t.jsx)(c.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(o.ArrowRight,{className:"mr-2 h-4 w-4"}),m?"Calculating...":"Run Score"]}),x&&(0,t.jsxs)("div",{className:"p-3 bg-error/10 border border-error/20 rounded-md text-sm text-error-foreground flex items-center gap-2",children:[(0,t.jsx)(n.AlertCircle,{className:"w-4 h-4"})," ",x]}),l&&(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-gray-50 p-6 rounded-lg shadow-inner space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Scoring Results:"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Composite Rating:"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-primary",children:l.composite_rating})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Probability of Default (PD):"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-red-600",children:[100*l.pd_12m,"%"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Loss Given Default (LGD):"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-orange-600",children:[100*l.lgd,"%"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Expected Credit Loss (ECL):"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-red-700",children:["$",l.ead_usd]})]})]}),(0,t.jsx)("h4",{className:"text-md font-semibold text-gray-800 mt-4",children:"Explanation:"}),(0,t.jsx)("p",{className:"text-gray-700",children:l.plain_language_explanation}),(0,t.jsx)("h4",{className:"text-md font-semibold text-gray-800 mt-4",children:"Red Flags:"}),l.top_negative_factors&&l.top_negative_factors.length>0?(0,t.jsx)("ul",{className:"list-disc list-inside text-red-600 text-sm",children:l.top_negative_factors.map((e,r)=>(0,t.jsxs)("li",{children:[e.factor,": ",e.value," (",e.impact,")"]},r))}):(0,t.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No significant red flags identified."}),(0,t.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,t.jsx)("button",{type:"button",onClick:f("Approve"),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"Approve"}),(0,t.jsx)("button",{type:"button",onClick:f("Decline"),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Decline"}),(0,t.jsx)("button",{type:"button",onClick:f("Refer to Committee"),className:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600",children:"Refer to Credit Committee"}),(0,t.jsx)("button",{type:"button",onClick:f("Override"),className:"px-4 py-2 bg-indigo-500 text-white rounded-md hover:bg-indigo-600",children:"Override (with Justification)"})]})]})]})};e.s(["default",()=>u],63307)}]);